<!DOCTYPE html>

<html th:lang-xmllang="#{lang}" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <link rel="shortcut icon" type="image/x-icon" th:href="@{/assets/favicon/favicon.ico}" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta content="text/html; charset=utf-8" />
    <title th:text="#{title} + ' | ' + #{org}"></title>
    <link th:href="@{/assets/css/stylesheet.css}" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Poppins" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Kumbh+Sans" />
</head>

<body>
    <form th:method="POST" th:action="@{__${#httpServletRequest.requestURI}__}" th:object="${form}">
        <table>
            <tr>
                <td>
                    <div class="profile-img-container">
                        <img class="profile-img" th:src="${photoId} ? @{/api/v1/photo/__${photoId}__} : @{/assets/img/placeholder.jpg}" alt="Profile picture" />
                    </div>
                    <th:block sec:authorize="hasRole('USER')">
                        <a th:href="@{/user/info/upload}" th:text="#{img.change}"></a>
                        <a th:href="@{/user/info/upload/del}" th:text="#{img.del}"></a>
                    </th:block>
                    <th:block sec:authorize="hasRole('ADMIN')">
                        <a th:href="@{/admin/users/__${username}__/upload}" th:text="#{img.change}"></a>
                        <a th:href="@{/admin/users/__${username}__/upload/del}" th:text="#{img.del}"></a>
                    </th:block>
                </td>

            </tr>
            <tr th:if="${#fields.hasErrors('firstname')}" th:each="err : ${#fields.errors('firstname')}">
                <td th:text="${err}" class="error"></td>
            </tr>
            <tr sec:authorize="hasRole('ADMIN')">
                <td th:text="|#{email} : |"></td>
                <td><input type="text" id="email" th:field="*{email}" /></td>
            </tr>
            <tr>
                <td th:text="|#{firstname} : |"></td>
                <td><input type="text" id="firstname" th:field="*{firstname}" /></td>
            </tr>
            <tr th:if="${#fields.hasErrors('lastname')}" th:each="err : ${#fields.errors('lastname')}">
                <td th:text="${err}" class="error"></td>
            </tr>
            <tr>
                <td th:text="|#{lastname} : |"></td>
                <td><input type="text" id="lastname" th:field="*{lastname}"></td>
            </tr>
            <tr th:if="${#fields.hasErrors('age')}" th:each="err : ${#fields.errors('age')}">
                <td th:text="${err}" class="error"></td>
            </tr>
            <tr>
                <td th:text="|#{age} : |"></td>
                <td><input type="text" id="age" th:field="*{age}"></td>
            </tr>
            <tr th:if="${#fields.hasErrors('semester')}" th:each="err : ${#fields.errors('semester')}">
                <td th:text="${err}" class="error"></td>
            </tr>
            <tr>
                <td th:text="|#{semester} : |"></td>
                <td><input type="text" id="semester" th:field="*{semester}"></td>
            </tr>
            <tr th:if="${#fields.hasErrors('course')}" th:each="err : ${#fields.errors('course')}">
                <td th:text="${err}" class="error"></td>
            </tr>
            <tr>
                <td th:text="|#{course} : |"></td>
                <td><input type="text" id="course" th:field="*{course}"></td>
            </tr>
            <tr th:if="${#fields.hasErrors('bio')}" th:each="err : ${#fields.errors('bio')}">
                <td th:text="${err}" class="error"></td>
            </tr>
            <tr>
                <td th:text="|#{bio} : |"></td>
                <td><textarea id="bio" th:field="*{bio}"></textarea></td>
            </tr>
            <tr sec:authorize="hasRole('ADMIN')">
                <td>
                    <th:block th:each="grem : ${allGremien}">
                        <input type="checkbox" th:value="${grem}" th:text="${grem.abbr}" th:field="*{gremien}">
                    </th:block>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="submit" value="Save" name="save" />
                    <input sec:authorize="hasRole('ADMIN')" type="submit" value="Password Reset" name="pwReset" />
                    <input sec:authorize="hasRole('ADMIN')" type="submit" value="Delete User" name="del" onclick="return confirm('Are you sure?')" />
                </td>
            </tr>
        </table>
    </form>
    <a sec:authorize="hasRole('USER')" th:href=@{/user} th:text="#{back.user}"></a>
    <a sec:authorize="hasRole('ADMIN')" th:href=@{/admin} th:text="#{back.admin}"></a>
    <br>
    <a th:href=@{/logout} th:text="#{logout}"></a>
</body>

</html>